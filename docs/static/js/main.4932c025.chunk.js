(this.webpackJsonpidol=this.webpackJsonpidol||[]).push([[0],{10:function(e,t,n){e.exports={SiteHeader:"SiteHeader_SiteHeader__1lvnp",content:"SiteHeader_content__29nP3",logo_and_title:"SiteHeader_logo_and_title__2ChdE",menu_icon_container:"SiteHeader_menu_icon_container__1KFSK",menu_icon:"SiteHeader_menu_icon__3AHni",title_conainer:"SiteHeader_title_conainer__kL5Pt",title:"SiteHeader_title__TmzfH",subtitle:"SiteHeader_subtitle__2FVwW",dti_logo:"SiteHeader_dti_logo__2cAkJ",sign_out_button_container:"SiteHeader_sign_out_button_container__Ivt7I",sign_out_button:"SiteHeader_sign_out_button__35q_C"}},135:function(e,t,n){e.exports=n.p+"static/media/dti-logo.679b9757.png"},158:function(e,t,n){e.exports=n(302)},163:function(e,t,n){},164:function(e,t,n){},26:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c}));var a=n(45),r=n.n(a);n(166),n(168);r.a.initializeApp({apiKey:"AIzaSyCCT5j588crPFvtKW5jM7Zkb_DLU_61VdY",authDomain:"idol-b6c68.firebaseapp.com",databaseURL:"https://idol-b6c68.firebaseio.com",projectId:"idol-b6c68",storageBucket:"idol-b6c68.appspot.com",messagingSenderId:"223626581097",appId:"1:223626581097:web:e80e98596d60486be03ef8",measurementId:"G-90WYJ18WZX"});var i=r.a.auth(),c=(r.a.firestore(),new r.a.auth.GoogleAuthProvider)},302:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(25),c=n.n(i),o=(n(163),n(67)),u=(n(164),n(46)),l=n(8),s=Object(a.lazy)((function(){return n.e(3).then(n.bind(null,319))})),m=function(e){return r.a.createElement(a.Suspense,{fallback:null},r.a.createElement(s,e))},d=Object(a.lazy)((function(){return n.e(4).then(n.bind(null,318))})),b=function(e){return r.a.createElement(a.Suspense,{fallback:null},r.a.createElement(d,e))},f=n(21),_=n.n(f),h=n(44),p=n(20),v=n(35),E=n(147),g=n(149),O=n(26),j=function(){function e(){Object(p.a)(this,e),this.subscribers=new Set}return Object(v.a)(e,[{key:"subscribe",value:function(e){this.subscribers.add(e)}},{key:"unsubscribe",value:function(e){this.subscribers.delete(e)}},{key:"emit",value:function(e){for(var t=0,n=Array.from(this.subscribers.values());t<n.length;t++){(0,n[t])(e)}}}]),e}(),S=function e(){Object(p.a)(this,e)};S.navOpenEmitter=new j,S.emailNotFoundError=new j;var k="http://localhost:9000/.netlify/functions/api/",y=function(){function e(){Object(p.a)(this,e)}return Object(v.a)(e,null,[{key:"login",value:function(e){return fetch(k+"login",{credentials:"include",method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({auth_token:e})}).then(function(){var e=Object(h.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"logout",value:function(){return fetch(k+"logout",{credentials:"include"}).then(function(){var e=Object(h.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}(),w=Object(a.createContext)({user:null}),H=function(e){Object(g.a)(n,e);var t=Object(E.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){O.a.onAuthStateChanged(function(){var e=Object(h.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return e.t0=y,e.next=4,t.getIdToken();case 4:e.t1=e.sent,e.t0.login.call(e.t0,e.t1).then((function(e){if(!e.isLoggedIn)return S.emailNotFoundError.emit(),void O.a.signOut();a.setState({user:t})})),e.next=9;break;case 8:y.logout().then((function(e){e.isLoggedIn?alert("Couldn't log out!"):a.setState({user:t})}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},a.state={user:O.a.currentUser?O.a.currentUser:null},a}return Object(v.a)(n,[{key:"render",value:function(){return r.a.createElement(w.Provider,{value:this.state},this.props.children)}}]),n}(a.Component),N=n(10),C=n.n(N),I=n(37),x=n(311),A=n(309),W=n(135),z=n.n(W),F=function(){return r.a.createElement("div",{className:C.a.SiteHeader,"data-testid":"SiteHeader"},r.a.createElement("div",{className:C.a.content},r.a.createElement("div",{className:C.a.logo_and_title},r.a.createElement("div",{className:C.a.menu_icon_container,onClick:function(){S.navOpenEmitter.emit(!0)}},r.a.createElement(I.a,{size:"big",className:C.a.menu_icon,name:"bars"})),r.a.createElement("img",{className:C.a.dti_logo,src:z.a,alt:"DTI logo"}),r.a.createElement("div",{className:C.a.title_conainer},r.a.createElement(x.a,{className:C.a.title,as:"h1"},"I",r.a.createElement("span",{className:C.a.subtitle},"nternal"),"\xa0 D",r.a.createElement("span",{className:C.a.subtitle},"TI"),"\xa0 O",r.a.createElement("span",{className:C.a.subtitle},"rganization"),"\xa0 L",r.a.createElement("span",{className:C.a.subtitle},"ogic")))),r.a.createElement("div",{className:C.a.sign_out_button_container},r.a.createElement(A.a,{className:C.a.sign_out_button,basic:!0,color:"red",onClick:function(){O.a.signOut()}},"Sign Out"))))},P=n(313),T=n(310),D=n(308),L=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],i=t[1];return Object(a.useEffect)((function(){var e=function(){return i(!0)};return S.emailNotFoundError.subscribe(e),function(){S.emailNotFoundError.unsubscribe(e)}})),r.a.createElement(D.a,{open:n,onClose:function(){return i(!1)},header:"Couldn't find a DTI member with that email!",content:"Contact a lead if you believe that this is an error.",actions:[{key:"close",content:"Close",negative:!0}]})};var J=function(){var e=Object(a.useContext)(w),t=r.a.useState(!1),n=Object(o.a)(t,2),i=n[0],c=n[1];return Object(a.useEffect)((function(){var e=function(e){c(e)};return S.navOpenEmitter.subscribe(e),function(){S.navOpenEmitter.unsubscribe(e)}})),e.user?r.a.createElement(u.a,null,r.a.createElement("div",{style:{minHeight:"100vh",minWidth:"100vw"}},r.a.createElement(F,null),r.a.createElement(P.a.Pushable,null,r.a.createElement(P.a,{as:T.a,animation:"overlay",icon:"labeled",inverted:!0,onHide:function(){return c(!1)},vertical:!0,visible:i,width:"thin",onClick:function(){S.navOpenEmitter.emit(!1)}},r.a.createElement(u.b,{to:"/"},r.a.createElement(T.a.Item,null,r.a.createElement(I.a,{name:"home"}),"Home")),r.a.createElement(u.b,{to:"/attendance"},r.a.createElement(T.a.Item,null,r.a.createElement(I.a,{name:"group"}),"Attendance"))),r.a.createElement(P.a.Pusher,{dimmed:i},r.a.createElement("div",{style:{minHeight:"90vh",minWidth:"100vw",margin:0}},r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/*"},r.a.createElement(b,null)))))))):r.a.createElement("div",null,r.a.createElement(L,null),r.a.createElement(u.a,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/*"},r.a.createElement(m,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(301);c.a.render(r.a.createElement(H,null,r.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[158,1,2]]]);
//# sourceMappingURL=main.4932c025.chunk.js.map