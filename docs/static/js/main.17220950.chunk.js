(this.webpackJsonpidol=this.webpackJsonpidol||[]).push([[0],{10:function(e,t,n){e.exports={SiteHeader:"SiteHeader_SiteHeader__1lvnp",content:"SiteHeader_content__29nP3",logo_and_title:"SiteHeader_logo_and_title__2ChdE",menu_icon_container:"SiteHeader_menu_icon_container__1KFSK",menu_icon:"SiteHeader_menu_icon__3AHni",title_conainer:"SiteHeader_title_conainer__kL5Pt",title:"SiteHeader_title__TmzfH",subtitle:"SiteHeader_subtitle__2FVwW",dti_logo:"SiteHeader_dti_logo__2cAkJ",sign_out_button_container:"SiteHeader_sign_out_button_container__Ivt7I",sign_out_button:"SiteHeader_sign_out_button__35q_C"}},133:function(e,t,n){e.exports=n.p+"static/media/dti-logo.679b9757.png"},156:function(e,t,n){e.exports=n(299)},161:function(e,t,n){},162:function(e,t,n){},26:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c}));var a=n(43),i=n.n(a);n(163),n(165);i.a.initializeApp({apiKey:"AIzaSyCCT5j588crPFvtKW5jM7Zkb_DLU_61VdY",authDomain:"idol-b6c68.firebaseapp.com",databaseURL:"https://idol-b6c68.firebaseio.com",projectId:"idol-b6c68",storageBucket:"idol-b6c68.appspot.com",messagingSenderId:"223626581097",appId:"1:223626581097:web:e80e98596d60486be03ef8",measurementId:"G-90WYJ18WZX"});var r=i.a.auth(),c=(i.a.firestore(),new i.a.auth.GoogleAuthProvider)},299:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(25),c=n.n(r),o=(n(161),n(65)),l=(n(162),n(44)),u=n(8),s=Object(a.lazy)((function(){return n.e(3).then(n.bind(null,316))})),m=function(e){return i.a.createElement(a.Suspense,{fallback:null},i.a.createElement(s,e))},d=Object(a.lazy)((function(){return n.e(4).then(n.bind(null,315))})),b=function(e){return i.a.createElement(a.Suspense,{fallback:null},i.a.createElement(d,e))},h=n(14),f=n(21),_=n(145),v=n(147),E=n(26),p=function(){function e(){Object(h.a)(this,e)}return Object(f.a)(e,null,[{key:"cache",value:function(e,t){this.cacheMap.set(e,t)}},{key:"retrieve",value:function(e){return this.cacheMap.get(e)}},{key:"invalidate",value:function(e){var t=this.cacheMap.get(e);return this.cacheMap.clear(),t}},{key:"has",value:function(e){return this.cacheMap.has(e)}}]),e}();p.cacheMap=new Map;var g="https://idol.api.cornelldti.org/.netlify/functions/api/",O=function(){function e(){Object(h.a)(this,e)}return Object(f.a)(e,null,[{key:"getAllMembers",value:function(){var e=this.name;return p.has(e)?Promise.resolve(p.retrieve(e)):fetch(g+"members/all").then((function(e){return e.json()})).then((function(t){var n=t.members;return p.cache(e,n),n}))}}]),e}(),S=function(){function e(){Object(h.a)(this,e),this.subscribers=new Set}return Object(f.a)(e,[{key:"subscribe",value:function(e){this.subscribers.add(e)}},{key:"unsubscribe",value:function(e){this.subscribers.delete(e)}},{key:"emit",value:function(e){for(var t=0,n=Array.from(this.subscribers.values());t<n.length;t++){(0,n[t])(e)}}}]),e}(),j=function e(){Object(h.a)(this,e)};j.navOpenEmitter=new S,j.emailNotFoundError=new S;var k=Object(a.createContext)({user:null}),y=function(e){Object(v.a)(n,e);var t=Object(_.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).initialLoad=Promise.resolve().then((function(){return O.getAllMembers().then((function(e){a.allMembers=e}))})),a.allMembers=void 0,a.componentDidMount=function(){E.a.onAuthStateChanged((function(e){a.initialLoad.then((function(){e?-1!==a.allMembers.map((function(e){return e.email})).findIndex((function(t){return t===e.email}))?a.setState({user:e}):(j.emailNotFoundError.emit(),E.a.signOut()):a.setState({user:e})}))}))},a.state={user:E.a.currentUser?E.a.currentUser:null},a}return Object(f.a)(n,[{key:"render",value:function(){return i.a.createElement(k.Provider,{value:this.state},this.props.children)}}]),n}(a.Component),H=n(10),w=n.n(H),N=n(36),C=n(308),I=n(306),M=n(133),A=n.n(M),P=function(){return i.a.createElement("div",{className:w.a.SiteHeader,"data-testid":"SiteHeader"},i.a.createElement("div",{className:w.a.content},i.a.createElement("div",{className:w.a.logo_and_title},i.a.createElement("div",{className:w.a.menu_icon_container,onClick:function(){j.navOpenEmitter.emit(!0)}},i.a.createElement(N.a,{size:"big",className:w.a.menu_icon,name:"bars"})),i.a.createElement("img",{className:w.a.dti_logo,src:A.a,alt:"DTI logo"}),i.a.createElement("div",{className:w.a.title_conainer},i.a.createElement(C.a,{className:w.a.title,as:"h1"},"I",i.a.createElement("span",{className:w.a.subtitle},"nternal"),"\xa0 D",i.a.createElement("span",{className:w.a.subtitle},"TI"),"\xa0 O",i.a.createElement("span",{className:w.a.subtitle},"rganization"),"\xa0 L",i.a.createElement("span",{className:w.a.subtitle},"ogic")))),i.a.createElement("div",{className:w.a.sign_out_button_container},i.a.createElement(I.a,{className:w.a.sign_out_button,basic:!0,color:"red",onClick:function(){E.a.signOut()}},"Sign Out"))))},W=n(310),z=n(307),F=n(305),x=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){var e=function(){return r(!0)};return j.emailNotFoundError.subscribe(e),function(){j.emailNotFoundError.unsubscribe(e)}})),i.a.createElement(F.a,{open:n,onClose:function(){return r(!1)},header:"Couldn't find a DTI member with that email!",content:"Contact a lead if you believe that this is an error.",actions:[{key:"close",content:"Close",negative:!0}]})};var D=function(){var e=Object(a.useContext)(k),t=i.a.useState(!1),n=Object(o.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){var e=function(e){c(e)};return j.navOpenEmitter.subscribe(e),function(){j.navOpenEmitter.unsubscribe(e)}})),e.user?i.a.createElement(l.a,null,i.a.createElement("div",{style:{minHeight:"100vh",minWidth:"100vw"}},i.a.createElement(P,null),i.a.createElement(W.a.Pushable,null,i.a.createElement(W.a,{as:z.a,animation:"overlay",icon:"labeled",inverted:!0,onHide:function(){return c(!1)},vertical:!0,visible:r,width:"thin",onClick:function(){j.navOpenEmitter.emit(!1)}},i.a.createElement(l.b,{to:"/"},i.a.createElement(z.a.Item,{as:"a"},i.a.createElement(N.a,{name:"home"}),"Home")),i.a.createElement(l.b,{to:"/attendance"},i.a.createElement(z.a.Item,{as:"a"},i.a.createElement(N.a,{name:"group"}),"Attendance"))),i.a.createElement(W.a.Pusher,{dimmed:r},i.a.createElement("div",{style:{minHeight:"90vh",minWidth:"100vw",margin:0}},i.a.createElement(u.c,null,i.a.createElement(u.a,{path:"/*"},i.a.createElement(b,null)))))))):i.a.createElement("div",null,i.a.createElement(x,null),i.a.createElement(l.a,null,i.a.createElement(u.c,null,i.a.createElement(u.a,{path:"/*"},i.a.createElement(m,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(298);c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(y,null,i.a.createElement(D,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[156,1,2]]]);
//# sourceMappingURL=main.17220950.chunk.js.map